<script setup lang="ts">
import { MapAndQuestionInterface } from '@/interfaces/mapAndQuestion.interface';
import { useResearchStore } from '../stores/research';
import { storeToRefs } from 'pinia';
import { ref } from 'vue'

const { currentStepChild, dataOfResearch } = storeToRefs(useResearchStore());
const mapAndQuestion = ref<MapAndQuestionInterface>({
        question: `De los ${dataOfResearch.value.num_estab_correct1} centros educativos que hay a 2km de tu ubicación:`,
        description: '¿Cuantos crees que son de bajo costo y de alto desempeño?',
    });

// const text = () => {
//     const rest = +campusesAround.value.length - +dataOfResearch?.value?.num_estab_answer1;
//     if (rest === 0 ) {
//         classOfAnswer.value = 'good-answer'
//         return {
//             title: 'Respuesta correcta',
//             description: `Creiste que habían ${dataOfResearch?.value?.num_estab_answer1} centros educativos a 2km de tu ubicación, y efectivamente hay ${campusesAround.value.length}`,
//         }
//     }

//     if (Math.sign(rest) === -1) {
//         classOfAnswer.value = 'bad-answer'
//         return {
//             title: 'Te pasaste',
//             description: `Creiste que habían ${dataOfResearch?.value?.num_estab_answer1} centros educativos a 2km de tu ubicación, pero en realidad hay ${campusesAround.value.length}.`,
//         }
//     }

//     if(rest < 3) {
//         return {
//             title: 'Estuviste muy cerca',
//             description: `Creiste que habían ${dataOfResearch?.value?.num_estab_answer1} centros educativos a 2km de tu ubicación, pero en realidad hay ${campusesAround.value.length}.`,
//         }
//     }

//     return {
//         title: 'Estuviste muy lejos',
//         description: `Creiste que habían ${dataOfResearch?.value?.num_estab_answer1} centros educativos a 2km de tu ubicación, pero en realidad hay ${campusesAround.value.length}.`,
//     }

// }

// const closeIframe = () => {
//     if (currentStepChild.value === 1 && currentStep.value === 2) {

//         window.top!.postMessage(
//             {
//                 context: 'explorer',
//                 action: 'close',
//                 value: true,
//             }, '*');
//     }

//     return '';
// }
</script>
<template>
    <h1 v-if="currentStepChild < 2" class="mt-3"> Información importante</h1>
    <template v-if="currentStepChild === 0">
        <p class="mt-8">
            Los establecimientos educacionales se dividen en distintos niveles. Te invitamos a revisarlos:
        </p>

        <h4 class="ml-2 mt-8">
            Nivel según costo
        </h4>
    </template>

    <template v-if="currentStepChild === 1">
        <p class="mt-8">
            Los establecimientos educacionales se dividen en distintos niveles. Te invitamos a revisarlos:
        </p>

        <h4 class="ml-2 mt-8">
            Nivel según desempeño
        </h4>
    </template>

    <section v-if="currentStepChild === 1" class="section-detail pl-16 mt-5">
        <div>
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="18" cy="18" r="18" fill="white" fill-opacity="0.6" />
                <circle cx="18" cy="18" r="16.5" fill="#20D1BF" />
                <path
                    d="M12.7664 11.9848L12.7664 25.2191C12.7664 25.4379 12.6971 25.6165 12.5586 25.7551C12.4201 25.8936 12.2414 25.9629 12.0227 25.9629C11.8039 25.9629 11.6253 25.8936 11.4867 25.7551C11.3482 25.6165 11.2789 25.4379 11.2789 25.2191L11.2789 11.9629L9.48516 13.7566C9.35391 13.8879 9.18984 13.9535 8.99297 13.9535C8.79609 13.9535 8.61745 13.8806 8.45703 13.7348C8.3112 13.5889 8.23828 13.4139 8.23828 13.2098C8.23828 13.0056 8.3112 12.8306 8.45703 12.6848L11.4977 9.64414C11.5852 9.57123 11.669 9.51654 11.7492 9.48008C11.8294 9.44362 11.9206 9.42539 12.0227 9.42539C12.1247 9.42539 12.2159 9.44362 12.2961 9.48008C12.3763 9.51654 12.4602 9.57123 12.5477 9.64414L15.5883 12.6848C15.7487 12.8452 15.8253 13.0202 15.818 13.2098C15.8107 13.3993 15.7341 13.5743 15.5883 13.7348C15.4424 13.8806 15.2638 13.9535 15.0523 13.9535C14.8409 13.9535 14.6695 13.8879 14.5383 13.7566L12.7664 11.9848Z"
                    fill="white" />
                <path
                    d="M24.7664 11.9848L24.7664 25.2191C24.7664 25.4379 24.6971 25.6165 24.5586 25.7551C24.4201 25.8936 24.2414 25.9629 24.0227 25.9629C23.8039 25.9629 23.6253 25.8936 23.4867 25.7551C23.3482 25.6165 23.2789 25.4379 23.2789 25.2191L23.2789 11.9629L21.4852 13.7566C21.3539 13.8879 21.1898 13.9535 20.993 13.9535C20.7961 13.9535 20.6174 13.8806 20.457 13.7348C20.3112 13.5889 20.2383 13.4139 20.2383 13.2098C20.2383 13.0056 20.3112 12.8306 20.457 12.6848L23.4977 9.64414C23.5852 9.57123 23.669 9.51654 23.7492 9.48008C23.8294 9.44362 23.9206 9.42539 24.0227 9.42539C24.1247 9.42539 24.2159 9.44362 24.2961 9.48008C24.3763 9.51654 24.4602 9.57123 24.5477 9.64414L27.5883 12.6848C27.7487 12.8452 27.8253 13.0202 27.818 13.2098C27.8107 13.3993 27.7341 13.5743 27.5883 13.7348C27.4424 13.8806 27.2638 13.9535 27.0523 13.9535C26.8409 13.9535 26.6695 13.8879 26.5383 13.7566L24.7664 11.9848Z"
                    fill="white" />
            </svg>



            <p>Satisfactorio</p>
        </div>
        <div>
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="18" cy="18" r="18" fill="white" fill-opacity="0.6" />
                <circle cx="18" cy="18" r="16.5" fill="#44B8EB" />
                <path
                    d="M18.7664 11.9848L18.7664 25.2191C18.7664 25.4379 18.6971 25.6165 18.5586 25.7551C18.4201 25.8936 18.2414 25.9629 18.0227 25.9629C17.8039 25.9629 17.6253 25.8936 17.4867 25.7551C17.3482 25.6165 17.2789 25.4379 17.2789 25.2191L17.2789 11.9629L15.4852 13.7566C15.3539 13.8879 15.1898 13.9535 14.993 13.9535C14.7961 13.9535 14.6174 13.8806 14.457 13.7348C14.3112 13.5889 14.2383 13.4139 14.2383 13.2098C14.2383 13.0056 14.3112 12.8306 14.457 12.6848L17.4977 9.64414C17.5852 9.57122 17.669 9.51653 17.7492 9.48008C17.8294 9.44362 17.9206 9.42539 18.0227 9.42539C18.1247 9.42539 18.2159 9.44362 18.2961 9.48008C18.3763 9.51653 18.4602 9.57122 18.5477 9.64414L21.5883 12.6848C21.7487 12.8452 21.8253 13.0202 21.818 13.2098C21.8107 13.3993 21.7341 13.5743 21.5883 13.7348C21.4424 13.8806 21.2638 13.9535 21.0523 13.9535C20.8409 13.9535 20.6695 13.8879 20.5383 13.7566L18.7664 11.9848Z"
                    fill="white" />
            </svg>

            <p>Aceptable alto</p>
        </div>
        <div>
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="18" cy="18" r="18" fill="white" fill-opacity="0.6" />
                <circle cx="18" cy="18" r="16.5" fill="#9A7DFF" />
                <path
                    d="M22.8652 14.5132L13.5071 23.8713C13.3524 24.0259 13.1771 24.1033 12.9812 24.1033C12.7852 24.1033 12.6099 24.0259 12.4553 23.8713C12.3006 23.7166 12.2232 23.5413 12.2232 23.3454C12.2232 23.1494 12.3006 22.9741 12.4553 22.8194L21.8288 13.4459L19.2921 13.4459C19.1065 13.4459 18.9441 13.3763 18.8049 13.237C18.6656 13.0978 18.5909 12.92 18.5806 12.7034C18.5806 12.4972 18.6527 12.3219 18.7971 12.1775C18.9415 12.0331 19.1168 11.9609 19.323 11.9609L23.6231 11.9609C23.7366 11.9713 23.8345 11.9919 23.917 12.0228C23.9995 12.0537 24.0768 12.1053 24.149 12.1775C24.2212 12.2497 24.2728 12.327 24.3037 12.4095C24.3346 12.492 24.3553 12.59 24.3656 12.7034L24.3656 17.0035C24.3656 17.2304 24.296 17.4082 24.1568 17.5371C24.0176 17.666 23.8397 17.7356 23.6231 17.746C23.4169 17.746 23.239 17.6712 23.0895 17.5217C22.94 17.3721 22.8652 17.2046 22.8652 17.019L22.8652 14.5132Z"
                    fill="white" />
            </svg>

            <p>Aceptable bajo</p>
        </div>
        <div>
            <svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="18" cy="18" r="18" fill="white" fill-opacity="0.6" />
                <circle cx="18" cy="18" r="16.5" fill="#5627FF" />
                <path
                    d="M24.0152 18.7664L10.7809 18.7664C10.5621 18.7664 10.3835 18.6971 10.2449 18.5586C10.1064 18.4201 10.0371 18.2414 10.0371 18.0227C10.0371 17.8039 10.1064 17.6253 10.2449 17.4867C10.3835 17.3482 10.5621 17.2789 10.7809 17.2789L24.0371 17.2789L22.2434 15.4852C22.1121 15.3539 22.0465 15.1898 22.0465 14.993C22.0465 14.7961 22.1194 14.6174 22.2652 14.457C22.4111 14.3112 22.5861 14.2383 22.7902 14.2383C22.9944 14.2383 23.1694 14.3112 23.3152 14.457L26.3559 17.4977C26.4288 17.5852 26.4835 17.669 26.5199 17.7492C26.5564 17.8294 26.5746 17.9206 26.5746 18.0227C26.5746 18.1247 26.5564 18.2159 26.5199 18.2961C26.4835 18.3763 26.4288 18.4602 26.3559 18.5477L23.3152 21.5883C23.1548 21.7487 22.9798 21.8253 22.7902 21.818C22.6007 21.8107 22.4257 21.7341 22.2652 21.5883C22.1194 21.4424 22.0465 21.2638 22.0465 21.0523C22.0465 20.8409 22.1121 20.6695 22.2434 20.5383L24.0152 18.7664Z"
                    fill="white" />
            </svg>

            <p>Elemental</p>
        </div>
    </section>

    <section v-if="currentStepChild === 0" class="section-detail pl-16 mt-5">
        <div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 23.16C18.1635 23.16 23.16 18.1635 23.16 12C23.16 5.8365 18.1635 0.839996 12 0.839996C5.8365 0.839996 0.839996 5.8365 0.839996 12C0.839996 18.1635 5.8365 23.16 12 23.16Z"
                    fill="#11D3D9" />
                <path
                    d="M12 24C5.4 24 0 18.6 0 12C0 5.4 5.4 0 12 0C18.6 0 24 5.4 24 12C24 18.6 18.6 24 12 24ZM12 1.68C6.24 1.68 1.68 6.36 1.68 12C1.68 17.64 6.36 22.32 12 22.32C17.64 22.32 22.32 17.64 22.32 12C22.32 6.36 17.76 1.68 12 1.68Z"
                    fill="white" fill-opacity="0.5" />
                <path
                    d="M12.6 11.04L13.08 10.32C13.08 10.32 13.08 10.32 13.08 10.44L14.64 10.08C14.52 9.6 14.4 9.24 14.04 8.88L16.08 6L15.48 5.64L13.44 8.4C13.2 8.28 12.96 8.16 12.6 8.04V6.84H11.4V8.04C10.2 8.28 9.36 9.12 9.36 10.32C9.36 11.16 9.96 11.88 10.8 12.24L10.44 12.72L9 13.08C9 13.44 9.12 13.8 9.36 14.16L7.2 17.52L7.8 18L9.96 14.88C10.32 15.12 10.8 15.36 11.4 15.48V16.68H12.72V15.48C14.04 15.24 14.76 14.28 14.76 13.32C14.76 12.24 14.16 11.4 12.6 11.04ZM11.64 10.8C11.28 10.68 11.04 10.44 11.04 10.2C11.04 9.84 11.4 9.48 12 9.48C12.36 9.48 12.48 9.6 12.72 9.6L11.88 10.8H11.64ZM12.12 14.04C11.52 14.04 11.16 13.8 10.92 13.56L11.64 12.6L12.36 12.72C12.84 12.84 13.08 13.08 13.08 13.32C12.96 13.68 12.6 14.04 12.12 14.04Z"
                    fill="white" stroke="white" stroke-opacity="0.5" stroke-width="0.1" stroke-miterlimit="10" />
            </svg>

            <p>Gratuito</p>
        </div>
        <div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 23.16C18.1635 23.16 23.16 18.1635 23.16 12C23.16 5.8365 18.1635 0.84 12 0.84C5.8365 0.84 0.839996 5.8365 0.839996 12C0.839996 18.1635 5.8365 23.16 12 23.16Z"
                    fill="#1595E9" />
                <path
                    d="M11.52 16.56V15.36C9.96001 15.12 9.24001 13.92 9.24001 13.08L10.8 12.72C10.8 13.32 11.28 13.92 12.24 13.92C12.84 13.92 13.2 13.68 13.2 13.2C13.2 12.84 12.96 12.72 12.48 12.6L11.52 12.36C10.32 12.12 9.48001 11.28 9.48001 10.32C9.48001 9.12 10.44 8.28 11.52 8.04V6.84H12.84V8.04C14.04 8.28 14.64 9.12 14.76 9.96L13.2 10.44C13.08 10.08 12.96 9.48 12.12 9.48C11.52 9.48 11.16 9.84 11.16 10.2C11.16 10.44 11.4 10.68 11.76 10.8L12.72 11.04C14.16 11.4 14.76 12.24 14.76 13.2C14.76 14.16 14.04 15.12 12.72 15.36V16.56H11.52Z"
                    fill="white" stroke="white" stroke-opacity="0.5" stroke-width="0.1" stroke-miterlimit="10" />
                <path
                    d="M12 24C5.4 24 0 18.6 0 12C0 5.4 5.4 0 12 0C18.6 0 24 5.4 24 12C24 18.6 18.6 24 12 24ZM12 1.68C6.24 1.68 1.68 6.36 1.68 12C1.68 17.64 6.36 22.32 12 22.32C17.64 22.32 22.32 17.64 22.32 12C22.32 6.36 17.76 1.68 12 1.68Z"
                    fill="white" fill-opacity="0.5" />
                <path
                    d="M12 24C5.4 24 0 18.6 0 12C0 5.4 5.4 0 12 0C18.6 0 24 5.4 24 12C24 18.6 18.6 24 12 24ZM12 1.68C6.24 1.68 1.68 6.36 1.68 12C1.68 17.64 6.36 22.32 12 22.32C17.64 22.32 22.32 17.64 22.32 12C22.32 6.36 17.76 1.68 12 1.68Z"
                    fill="white" fill-opacity="0.5" />
            </svg>

            <p>RD$1 - RD$5,000</p>
        </div>
        <div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M11.76 23.16C17.9235 23.16 22.92 18.1635 22.92 12C22.92 5.8365 17.9235 0.84 11.76 0.84C5.59651 0.84 0.600006 5.8365 0.600006 12C0.600006 18.1635 5.59651 23.16 11.76 23.16Z"
                    fill="#4139B4" />
                <path
                    d="M7.92 16.8V15.6C6.36 15.36 5.64 14.16 5.64 13.32L7.2 12.96C7.2 13.56 7.68 14.16 8.64 14.16C9.24 14.16 9.6 13.92 9.6 13.44C9.6 13.08 9.36 12.96 8.88 12.84L7.92 12.6C6.72 12.36 5.88 11.52 5.88 10.56C5.88 9.36 6.84 8.52 7.92 8.28V7.08H9.24V8.28C10.44 8.52 11.04 9.36 11.16 10.2L9.6 10.56C9.48 10.2 9.36 9.72 8.52 9.72C7.92 9.72 7.56 10.08 7.56 10.44C7.56 10.68 7.8 10.92 8.16 11.04L9.12 11.28C10.56 11.64 11.16 12.48 11.16 13.44C11.16 14.4 10.44 15.36 9.12 15.6V16.8H7.92Z"
                    fill="white" stroke="white" stroke-opacity="0.5" stroke-width="0.1" stroke-miterlimit="10" />
                <path
                    d="M14.52 16.8V15.6C12.96 15.36 12.24 14.16 12.24 13.32L13.8 12.96C13.8 13.56 14.28 14.16 15.24 14.16C15.84 14.16 16.2 13.92 16.2 13.44C16.2 13.08 15.96 12.96 15.48 12.84L14.4 12.6C13.2 12.36 12.36 11.52 12.36 10.56C12.36 9.36 13.32 8.52 14.4 8.28V7.08H15.72V8.28C16.92 8.52 17.52 9.36 17.64 10.2L16.08 10.56C15.96 10.2 15.84 9.6 15 9.6C14.4 9.6 14.04 9.96 14.04 10.32C14.04 10.56 14.28 10.8 14.64 10.92L15.6 11.16C17.04 11.52 17.64 12.36 17.64 13.32C17.64 14.28 16.92 15.24 15.6 15.48V16.68H14.52V16.8Z"
                    fill="white" stroke="white" stroke-opacity="0.5" stroke-width="0.1" stroke-miterlimit="10" />
                <path
                    d="M12 24C5.4 24 0 18.6 0 12C0 5.4 5.4 0 12 0C18.6 0 24 5.4 24 12C24 18.6 18.6 24 12 24ZM12 1.68C6.24 1.68 1.68 6.36 1.68 12C1.68 17.76 6.36 22.32 12 22.32C17.64 22.32 22.32 17.64 22.32 12C22.32 6.24 17.76 1.68 12 1.68Z"
                    fill="white" fill-opacity="0.5" />
            </svg>

            <p>RD$5,000 - RD$10,000</p>
        </div>
        <div>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M12 23.16C18.1635 23.16 23.16 18.1635 23.16 12C23.16 5.8365 18.1635 0.84 12 0.84C5.8365 0.84 0.839996 5.8365 0.839996 12C0.839996 18.1635 5.8365 23.16 12 23.16Z"
                    fill="#8E227F" />
                <path
                    d="M12 24C5.4 24 0 18.6 0 12C0 5.4 5.4 0 12 0C18.6 0 24 5.4 24 12C24 18.6 18.6 24 12 24ZM12 1.68C6.24 1.68 1.68 6.36 1.68 12C1.68 17.76 6.36 22.32 12 22.32C17.64 22.32 22.32 17.64 22.32 12C22.32 6.24 17.76 1.68 12 1.68Z"
                    fill="white" fill-opacity="0.5" />
                <path
                    d="M4.92 16.8V15.6C3.36 15.36 2.64 14.16 2.64 13.32L4.2 12.96C4.2 13.56 4.68 14.16 5.64 14.16C6.24 14.16 6.6 13.92 6.6 13.44C6.6 13.08 6.36 12.96 5.88 12.84L4.92 12.6C3.72 12.36 2.88 11.52 2.88 10.56C2.88 9.36 3.84 8.52 4.92 8.28V7.2H6.24V8.4C7.44 8.64 8.04 9.48 8.16 10.32L6.6 10.68C6.48 10.32 6.36 9.72 5.52 9.72C4.92 9.72 4.56 10.08 4.56 10.44C4.56 10.8 4.8 11.04 5.16 11.04L6.12 11.28C7.56 11.64 8.16 12.48 8.16 13.44C8.16 14.4 7.44 15.36 6.12 15.6V16.8H4.92Z"
                    fill="white" stroke="white" stroke-opacity="0.5" stroke-width="0.1" stroke-miterlimit="10" />
                <path
                    d="M11.52 16.8V15.6C9.96001 15.36 9.24001 14.16 9.24001 13.32L10.8 12.96C10.8 13.56 11.28 14.16 12.24 14.16C12.84 14.16 13.2 13.92 13.2 13.44C13.2 13.08 12.96 12.96 12.48 12.84L11.52 12.6C10.32 12.36 9.48001 11.52 9.48001 10.56C9.48001 9.36 10.44 8.52 11.52 8.28V7.2H12.84V8.4C14.04 8.64 14.64 9.48 14.76 10.32L13.2 10.68C13.08 10.32 12.96 9.72 12.12 9.72C11.52 9.72 11.16 10.08 11.16 10.44C11.16 10.68 11.4 10.92 11.76 11.04L12.72 11.28C14.16 11.64 14.76 12.48 14.76 13.44C14.76 14.4 14.04 15.36 12.72 15.6V16.8H11.52Z"
                    fill="white" stroke="white" stroke-opacity="0.5" stroke-width="0.1" stroke-miterlimit="10" />
                <path
                    d="M18.12 16.8V15.6C16.56 15.36 15.84 14.16 15.84 13.32L17.4 12.96C17.4 13.56 17.88 14.16 18.84 14.16C19.44 14.16 19.8 13.92 19.8 13.44C19.8 13.08 19.56 12.96 19.08 12.84L18 12.72C16.8 12.48 15.96 11.64 15.96 10.68C15.96 9.48 16.92 8.64 18 8.4V7.2H19.32V8.4C20.52 8.64 21.12 9.48 21.24 10.32L19.68 10.68C19.56 10.32 19.44 9.72 18.6 9.72C18 9.72 17.64 10.08 17.64 10.44C17.64 10.68 17.88 10.92 18.24 11.04L19.2 11.28C20.64 11.64 21.24 12.48 21.24 13.44C21.24 14.4 20.52 15.36 19.2 15.6V16.8H18.12Z"
                    fill="white" stroke="white" stroke-opacity="0.5" stroke-width="0.1" stroke-miterlimit="10" />
            </svg>


            <p>Más de RD$10,000</p>
        </div>
    </section>

    <MapAndQuestion v-if="currentStepChild === 2" :config="mapAndQuestion" :showIcon="true"/>
    <ResultsOfQuestion v-if="currentStepChild === 3" />
</template>
